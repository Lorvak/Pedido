<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
  
 <body>
        <ui:composition template="./principal.xhtml">

            <ui:define name="center">
                <p:layoutUnit position="center" size="100" header="Cadastro Responsável" 
                              resizable="true" closable="true" collapsible="true">
                    <h:form>
                        <div align="center" style="margin-top: 0px;">
                            <p:toolbar style="margin-top: 0px">
                                <p:toolbarGroup align="left" style="height: 30px" >
                                    <p:commandButton value="Pesquisar" image="ui-icon-search"
                                                     action="#{alunoControle.pesquisar}" ajax="false"
                                                     immediate="true"/>

                                    <p:commandButton value="Novo" image="ui-icon-folder-open"
                                                     action="#{alunoControle.novoAluno}"  ajax="false"/>
                                </p:toolbarGroup>
                            </p:toolbar>                            
                            <p:messages id="mensagens" showSummary="true" />
                              <p:focus for="cpfResp" />
                            <p:fieldset legend="Responsável" toggleable="true" 
                                        style="margin-top:5px;width:700px;">
                                <h:panelGrid columns="4">
                                    <h:outputText value="CPF Responsável:" />
                                    <p:inputMask id="cpfResp" value="#{alunoControle.responsavel.cpf}"
                                        mask="999.999.999-99"  required="true" requiredMessage="cpf é obrigatório"
                                                 size="45"/>
                                    <h:message for="cpfResp"/>
                                    <p:commandButton value="Pesquisar" image="ui-icon-search"
                                                     action="#{alunoControle.pesquisaCpfResponsavel()}"
                                                      ajax="false"/>
                                </h:panelGrid>
                            </p:fieldset>                                               
                        </div>
                    </h:form>
                    <div style="margin-top: 10px; width: 900px">
                        <h:form>
                            <p:focus for="nome" />
                            <p:fieldset legend="Dados do Resposável" toggleable="true" 
                                        style=" width:400px; float:left; height: 200px;">
                                <h:panelGrid columns="3">
                                    <h:outputText value="Nome:" />
                                    <p:inputText id="nome" value="#{alunoControle.responsavel.nome}"
                                                 required="true" requiredMessage="nome obrigatório"
                                                 size="45"/>
                                    <h:message for="nome"/>

                                    <h:outputText value="E-mail:" />
                                    <p:inputText id="email" value="#{alunoControle.responsavel.email}"
                                                 required="true" requiredMessage="e-mail obrigatório" size="45"/>
                                    <h:message for="email"/>

                                    <h:outputText value="CPF:" />
                                    <p:inputMask id="cpf" value="#{alunoControle.responsavel.cpf}"
                                                 mask="999.999.999-99"
                                                 required="true" requiredMessage="cpf obrigatório"/>
                                    <h:message for="cpf"/>

                                    <h:outputText value="Nascimento:"/>
                                    <p:calendar locale="pt" showButtonPanel="true" navigator="true" id="ptCal" 
                                                value="#{alunoControle.responsavel.nascimento}" pattern="dd/MM/yyyy"
                                                required="true" requiredMessage="nascimento obrigatório" yearRange="1950"/>
                                    <h:message for="nascimento"/>

                                    <h:outputText value="Telefone:"/>
                                    <p:inputMask id="telefone" value="#{alunoControle.responsavel.telefone}"
                                       mask="(99)9999-9999"  required="true" requiredMessage="telefone obrigatório"/>
                                    <h:message for="telefone"/>

                                    <h:outputText value="Grau Parentesco:"/>
                                    <p:inputText id="parente" value="#{alunoControle.responsavel.grauParentesco}"
                                                 required="true" requiredMessage="grau obrigatório"/>
                                    <h:message for="parente"/>
                                </h:panelGrid>
                            </p:fieldset>

                            <p:fieldset id="cadEndereco" legend="Endereço:" toggleable="true"

                                        style="width:400px; float:right; height: 200px;" >
                                <h:panelGrid columns="3" >
                                    <h:outputText value="Rua:" />
                                    <h:inputText id="rua" value="#{alunoControle.endereco.rua}"
                                                 required="true" requiredMessage="rua obrigatório" size="45"/>
                                    <h:message for="rua"/>

                                    <h:outputText value="Bairro:" />
                                    <h:inputText id="bairro" value="#{alunoControle.endereco.bairro}"
                                                 required="true" requiredMessage="bairro obrigatório"/>
                                    <h:message for="bairro"/>

                                    <h:outputText value="Cidade:" />
                                    <h:inputText id="cidade" value="#{alunoControle.endereco.cidade}"
                                                 required="true" requiredMessage="cidade obrigatório"/>
                                    <h:message for="cidade"/>

                                    <h:outputText value="CEP:" />
                                    <p:inputMask id="cep" value="#{alunoControle.endereco.cep}"
                                       mask="99999-999" required="true" requiredMessage="cep obrigatório"/>
                                    <h:message for="cep"/>
                                </h:panelGrid>
                            </p:fieldset>
                            <p:commandButton value="Confirmar" image="ui-icon-disk"
                                             action="#{alunoControle.salveResponsavel()}" ajax="false"
                                   style="clear: both; margin:10px 0px 0px 50px " />
                        </h:form>
                    </div>
                </p:layoutUnit>
            </ui:define>

        </ui:composition>

    </body>
</html>
